<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    
    <title>Python dataclasses 数据类相关问题 | 《日想錄》</title>

    <meta name="description" content="&lt;p&gt;从我学得Python基础计起，已快有一年时间，也写下数个草芥般的小项目，总觉了解的知识浅薄轻浮。若想开发更加自由，本应继续学习深入，或是参悟官方文档，或是拜读知名项目源码，奈何琐事不断，又贪念玩乐，最终重蹈覆辙，只是浅学了其他知识。到头来所学技术样样有听闻，而样样不精深，实属惭愧。&lt;/p&gt;">
    <meta name="keywords" content="blog,Nranphy,Nranp,年回">

    

    <meta property="og:locale" content="zh-CN" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content= "Python dataclasses 数据类相关问题 | 《日想錄》"  />
    <meta property="og:description" content= "&lt;p&gt;从我学得Python基础计起，已快有一年时间，也写下数个草芥般的小项目，总觉了解的知识浅薄轻浮。若想开发更加自由，本应继续学习深入，或是参悟官方文档，或是拜读知名项目源码，奈何琐事不断，又贪念玩乐，最终重蹈覆辙，只是浅学了其他知识。到头来所学技术样样有听闻，而样样不精深，实属惭愧。&lt;/p&gt;" />
    <meta property="og:url" content="https://blog.nranp.com/tech/PythonDataclassesProblems/index.html" />
    <meta property="og:site_name" content="" />
    <meta property="article:author" content="Nranphy" />
    <meta property="article:publisher" content="" />
    <meta property="og:description" content="&lt;p&gt;从我学得Python基础计起，已快有一年时间，也写下数个草芥般的小项目，总觉了解的知识浅薄轻浮。若想开发更加自由，本应继续学习深入，或是参悟官方文档，或是拜读知名项目源码，奈何琐事不断，又贪念玩乐，最终重蹈覆辙，只是浅学了其他知识。到头来所学技术样样有听闻，而样样不精深，实属惭愧。&lt;/p&gt;" />
    <meta name="twitter:title" content="Python dataclasses 数据类相关问题 | 《日想錄》"/>
    <meta name="twitter:description" content="&lt;p&gt;从我学得Python基础计起，已快有一年时间，也写下数个草芥般的小项目，总觉了解的知识浅薄轻浮。若想开发更加自由，本应继续学习深入，或是参悟官方文档，或是拜读知名项目源码，奈何琐事不断，又贪念玩乐，最终重蹈覆辙，只是浅学了其他知识。到头来所学技术样样有听闻，而样样不精深，实属惭愧。&lt;/p&gt;"/>
    <script type="application/ld+json">
        {
            "description": "&lt;p&gt;从我学得Python基础计起，已快有一年时间，也写下数个草芥般的小项目，总觉了解的知识浅薄轻浮。若想开发更加自由，本应继续学习深入，或是参悟官方文档，或是拜读知名项目源码，奈何琐事不断，又贪念玩乐，最终重蹈覆辙，只是浅学了其他知识。到头来所学技术样样有听闻，而样样不精深，实属惭愧。&lt;/p&gt;",
            "author": { "@type": "Person", "name": "Nranphy" },
            "@type": "BlogPosting",
            "url": "https://blog.nranp.com/tech/PythonDataclassesProblems/index.html",
            "publisher": {
            "@type": "Organization",
            "logo": {
                "@type": "ImageObject",
                "url": "https://blog.nranp.comundefined"
            },
            "name": "Nranphy"
            },
            "headline": "Python dataclasses 数据类相关问题 | 《日想錄》",
            "datePublished": "2022-09-25T15:38:00.000Z",
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://blog.nranp.com/tech/PythonDataclassesProblems/index.html"
            },
            "@context": "http://schema.org"
        }
    </script>




    

    
    <meta property="algolia:search" data-application-id="AXY19HDJ1V" data-api-key="0f4be07cd89c00ce84b464240d6df376" data-index-name="blog">
    

    

    
    <link rel="icon" href="/images/favicon.ico">
    

    

    
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    

    

    
<link rel="stylesheet" href="/dist/build.css?v=1654266144177.css">


    
<link rel="stylesheet" href="/dist/custom.css?v=1654266144177.css">


    <script>
        window.isPost = true
        window.aomori = {
            
            gitalk: {
                enable: true,
                clientID: "2bdce2825bf5f4f4d40e",
                clientSecret: "cfd23a7c7b405d24143351003003e98275bf87ee",
                repo: "nranphy.github.io",
                owner: "Nranphy",
                admin: ["Nranphy",],
                distractionFreeMode: true  // Facebook-like distraction free mode
            },
            
            
            
        }
        window.aomori_logo_typed_animated = true
        window.aomori_search_algolia = true

    </script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body>

    <div class="container">
    <header class="header">
        <div class="header-type">
            
            <div class="header-type-inner">
                
                    <div id="typed-strings" style="display:none">
                        <p>《日想錄》</p>
                    </div>
                    <a class="header-type-title" id="typed" href="/"></a>
                
    
                
            </div>
        </div>
        <div class="header-menu">
            <div class="header-menu-inner">
                
                <a href="/">ホーム</a>
                
                <a href="/artworks/">ARTWORKS</a>
                
                <a href="/categories/works/">WORKS</a>
                
                <a href="/categories/essay/">ESSAY</a>
                
                <a href="/categories/tech/">TECH</a>
                
                <a href="/categories/junk/">JUNK</a>
                
                <a href="/friends/">FRIENDS</a>
                
                <a href="/about/">ABOUT</a>
                
            </div>
            <div class="header-menu-social">
                
    <a class="social" target="_blank" href="https://blog.nranp.com">
        <ion-icon name="home-sharp"></ion-icon>
    </a>

    <a class="social" target="_blank" href="https://space.bilibili.com/10521539">
        <ion-icon name="logo-youtube"></ion-icon>
    </a>

    <a class="social" target="_blank" href="https://github.com/Nranphy">
        <ion-icon name="logo-github"></ion-icon>
    </a>

            </div>
        </div>

        <div class="header-menu-mobile">
            <div class="header-menu-mobile-inner" id="mobile-menu-open">
                <i class="icon icon-menu"></i>
            </div>
        </div>
    </header>

    <div class="header-menu-mobile-menu">
        <div class="header-menu-mobile-menu-bg"></div>
        <div class="header-menu-mobile-menu-wrap">
            <div class="header-menu-mobile-menu-inner">
                <div class="header-menu-mobile-menu-close" id="mobile-menu-close">
                    <i class="icon icon-cross"></i>
                </div>
                <div class="header-menu-mobile-menu-list">
                    
                    <a href="/">ホーム</a>
                    
                    <a href="/artworks/">ARTWORKS</a>
                    
                    <a href="/categories/works/">WORKS</a>
                    
                    <a href="/categories/essay/">ESSAY</a>
                    
                    <a href="/categories/tech/">TECH</a>
                    
                    <a href="/categories/junk/">JUNK</a>
                    
                    <a href="/friends/">FRIENDS</a>
                    
                    <a href="/about/">ABOUT</a>
                    
                </div>
            </div>
        </div>
    </div>

</div>

    <div class="container">
        <div class="main">
            <section class="inner">
                <section class="inner-main">
                    <div class="post">
    <article id="post-clcq79ieb000cwkua6pmmf31j" class="article article-type-post" itemscope
    itemprop="blogPost">

    <div class="article-inner">

        
          
        
        
        

        
        <header class="article-header">
            
  
    <h1 class="article-title" itemprop="name">
      Python dataclasses 数据类相关问题
    </h1>
  

        </header>
        

        <div class="article-more-info article-more-info-post hairline">

            <div class="article-date">
  <time datetime="2022-09-25T15:38:00.000Z" itemprop="datePublished">2022-09-25</time>
</div>

            
            <div class="article-category">
                <a class="article-category-link" href="/categories/tech/">tech</a>
            </div>
            

            
            <div class="article-tag">
                <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dataclasses/" rel="tag">dataclasses</a></li></ul>
            </div>
            

            

        </div>

        <div class="article-entry post-inner-html hairline" itemprop="articleBody">
            <p>从我学得Python基础计起，已快有一年时间，也写下数个草芥般的小项目，总觉了解的知识浅薄轻浮。若想开发更加自由，本应继续学习深入，或是参悟官方文档，或是拜读知名项目源码，奈何琐事不断，又贪念玩乐，最终重蹈覆辙，只是浅学了其他知识。到头来所学技术样样有听闻，而样样不精深，实属惭愧。</p>
<span id="more"></span>
<p>自省之余，正逢暑期休假，近来又因疫情隔离在家，便略读了数个项目的源码。其间，我时常发现未曾见过的Python用法和设计方式，并在开发过程中使用，以优化代码和实现种种特殊需求。Python作为一门被广泛使用的语言，其语法和思想相对简单，但对于某些人抨击Python（或许还有GO语言）的简单易用，称其“内容匮乏”之云云，显然是偏颇的。若是只需编写小工具，Python简单使用足矣，但要究其奥妙，深有cpython底层，广有众多模块，最寻常的，也要了解标准库及其文档。如此看来，Python并非想象中那般温驯。</p>
<hr>
<p>Python在3.7版本提供了<code>dataclasses</code>模块，用于方便地创建数据类，并自动生成<code>__init__()</code>，<code>__repr__()</code>等方法：</p>
<pre><code class="lang-Python">from dataclasses import dataclass, field

@dataclass
class Student:
    name:str
    age:int
    scores:list[int] # Python3.9可直接使用list进行类型标注
    GPA:list[float] = field(default_factory=list)

alice = Student(&quot;Alice&quot;,13,[99,98,97])
</code></pre>
<p>此处只是简单展示dataclass的使用方法，关于模块dataclasses的使用，可直接参见<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/dataclasses.html">Python官方文档dataclasses模块部分</a>，或搜索相关资料（本文末尾有相关参考资料），本文将不再赘述。</p>
<p>这里记录了我在使用dataclass时的所遇问题和对应的解决办法。</p>
<hr>
<h2 id="dataclass数据类的继承"><a href="#dataclass数据类的继承" class="headerlink" title="dataclass数据类的继承"></a>dataclass数据类的继承</h2><p>在实际使用中，dataclass并非如namedtuple一般单纯，我们常常是将其作为一个类来进行管理和操作，某些情况下也无可避免的需要使用类的继承。</p>
<p>与普通的类不同，dataclass类因为其自动生成<code>__init__()</code>方法的缘故，继承会遇到这样的问题——若父类设定了默认参数，子类要在<code>__init__()</code>方法中加入新的位置参数，将比较麻烦：</p>
<pre><code class="lang-Python">@dataclass
class Student:
    name:str
    age:int
    scores:list[int]
    GPA:list[float] = field(default_factory=list)

@dataclass # 此处若不使用dataclass，便相当于直接从Student处继承来__init__
class StudentDetail(Student):
    demerit:int

# 发生错误
# TypeError: non-default argument &#39;demerit&#39; follows default argument
</code></pre>
<p>这就如同在正常的函数中，将位置参数写在了关键字参数之后，不过彼时是SyntaxError，而此处是引发TypeError.为此，我想出以下几种方案来解决这个问题：</p>
<h3 id="手动重写-init-或-全部使用关键字参数"><a href="#手动重写-init-或-全部使用关键字参数" class="headerlink" title="手动重写__init__() 或 全部使用关键字参数"></a>手动重写<code>__init__()</code> 或 全部使用关键字参数</h3><p>一个显而易见的解决方法如下，子类不使用dataclass（或者让子类的dataclass装饰器不再自动生成<code>__init__()</code>方法，并手动重写<code>__init__()</code>：</p>
<pre><code class="lang-Python">@dataclass(init=False) # 也可直接去掉
class StudentDetail(Student):
    def __init__(
    self,
    name:str,
    age:int,
    scores:list[int],
    demerit:int,
    GPA:list[float]=[]):
        self.name = name
        self.age = age
        self.scores = scores
        self.demerit = demerit
        self.GPA = GPA
</code></pre>
<p>但就同其显而易见，已然违背了我们使用dataclass语法糖的初心，仅在参数少时尚可一试。</p>
<p>至于全部使用关键词参数，也与重写的方法如出一辙，但也相对方便一些。这里提供<a target="_blank" rel="noopener" href="https://www.web-dev-qa-db-ja.com/ja/python/python-37%E3%83%87%E3%83%BC%E3%82%BF%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E7%B6%99%E6%89%BF/805744243/">这篇问答</a>里给出的一种方案：.</p>
<pre><code class="lang-Python">_no_default = object()

@dataclass
class Child(Parent):
    school: str = _no_default # 将想新增的位置参数给予默认值
    ugly: bool = True

    def __post_init__(self):
        if self.school is _no_default: # 在`__post_init__()`方法中对其进行判断，达到如同位置参数一般的报错效果。关于`__post_init__()`方法的效果请参见文档。
            raise TypeError(&quot;__init__ missing 1 required argument: &#39;school&#39;&quot;)
</code></pre>
<h3 id="编写多个基类进行组合"><a href="#编写多个基类进行组合" class="headerlink" title="编写多个基类进行组合"></a>编写多个基类进行组合</h3><p>在上面提到的<a target="_blank" rel="noopener" href="https://www.web-dev-qa-db-ja.com/ja/python/python-37%E3%83%87%E3%83%BC%E3%82%BF%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E7%B6%99%E6%89%BF/805744243/">这篇问答</a>里，还提到了一个办法，即编写多个基类来组合出父类与子类：</p>
<pre><code class="lang-Python">@dataclass
class _ParentBase:
    name:str
    age:int
    scores:list[int]

@dataclass
class _ParentDefaultsBase:
    GPA:list[float] = field(default_factory=list)

@dataclass
class _ChildBase(_ParentBase):
    demerit:int

@dataclass
class _ChildDefaultsBase(_ParentDefaultsBase):
    GPA:list[float] = field(default_factory=list)

@dataclass
class Parent(_ParentDefaultsBase, _ParentBase):
    pass

@dataclass
class Child(Parent, _ChildDefaultsBase, _ChildBase): # 注意继承先后
    pass
</code></pre>
<p>请注意<code>Parent</code>和<code>Child</code>的继承顺序，利用了类继承的逆MRO(Method Resolution Order)顺序（在<a target="_blank" rel="noopener" href="https://peps.python.org/pep-0557/#inheritance">PEP 557</a>中有提到：</p>
<blockquote>
<p>When the Data Class is being created by the @dataclass decorator, it looks through all of the class’s base classes in reverse MRO (that is, starting at object) and, for each Data Class that it finds, adds the fields from that base class to an ordered mapping of fields. After all of the base class fields are added, it adds its own fields to the ordered mapping. All of the generated methods will use this combined, calculated ordered mapping of fields. Because the fields are in insertion order, derived classes override base classes.</p>
</blockquote>
<p>容易看出，在<code>Child</code>继承中，<code>Parent</code>的位置并不重要，但需要保证<code>_ChildBase</code>与<code>_ParentBase</code>的顺序要在<code>_ChildDefaultsBase</code>与<code>_ParentDefaultsBase</code>之前，此时<code>Child</code>的继承顺序如下：</p>
<pre><code>_ParentBase
_ChildBase
_ParentDefaultsBase
_ChildDefaultsBase
Parent
可通过给每个类都加上相同名称的方法，并在继承后通过`Child`调用，以此进行验证。
</code></pre><p>要使用dataclass、要从父类继承、要给子类新增位置参数，这个方法可谓面面俱到。只是唯一的可惜之处是其简洁程度仍然不够，对设计者的思想要求较高。</p>
<h3 id="为父类加上一个存储额外参数的字典参数"><a href="#为父类加上一个存储额外参数的字典参数" class="headerlink" title="为父类加上一个存储额外参数的字典参数"></a>为父类加上一个存储额外参数的字典参数</h3><p>如NoneBot2框架新增的<code>PluginMetadata类</code>中，提供了一个字典属性extra：</p>
<pre><code class="lang-Python">@dataclass(eq=False)
class PluginMetadata:
    &quot;&quot;&quot;插件元信息，由插件编写者提供&quot;&quot;&quot;

    name: str
    &quot;&quot;&quot;插件可阅读名称&quot;&quot;&quot;
    description: str
    &quot;&quot;&quot;插件功能介绍&quot;&quot;&quot;
    usage: str
    &quot;&quot;&quot;插件使用方法&quot;&quot;&quot;
    config: Optional[Type[BaseModel]] = None
    &quot;&quot;&quot;插件配置项&quot;&quot;&quot;
    extra: Dict[Any, Any] = field(default_factory=dict)
</code></pre>
<p>子类无需改写<code>__init__()</code>，个人感觉这也是一个在某些情况下更方便的解决方案。</p>
<p>既然如此，可否如普通的函数一般，在Dataclass中实现如<code>*args</code>,<code>**kwargs</code>的效果呢？</p>
<h2 id="Dataclass数据类实现-kwargs的效果"><a href="#Dataclass数据类实现-kwargs的效果" class="headerlink" title="Dataclass数据类实现**kwargs的效果"></a>Dataclass数据类实现**kwargs的效果</h2><p>如果不多加思考，便直接在dataclass中加入形如<code>*args</code>,<code>**kwargs</code>的参数，必然会得到<code>SyntaxError: invalid syntax</code>。</p>
<p>下面是<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/55099243/python3-dataclass-with-kwargsasterisk/63291704">StackOverflow相关问题</a>提供的几种办法。</p>
<h3 id="提供一个字典用以存放已知多余参数"><a href="#提供一个字典用以存放已知多余参数" class="headerlink" title="提供一个字典用以存放已知多余参数"></a>提供一个字典用以存放已知多余参数</h3><p>这就相当于上一个问题所提到的最后一种解法，当你知道多余的参数时，可以直接放入这个字典中。这是最朴素的做法，但你不能真正像<code>**kwargs</code>一样使用，你不能<code>func(**dict)</code>将字典内容作为参数传入，也不能通过“.”来访问属性（当然，你可以在<code>__post_init__()</code>中手动将其设置为属性。</p>
<pre><code class="lang-Python">from dataclasses import dataclass, field
from typing import Optional, Dict


@dataclass
class MyDataclass:
    data1: Optional[str] = None
    data2: Optional[Dict] = None
    data3: Optional[Dict] = None

    kwargs: field(default_factory=dict) = None

    def __post_init__(self):
        [setattr(self, k, v) for k, v in self.kwargs.items()]
</code></pre>
<p>用法如下，但<code>dataclasses.asdict()</code>并不会输出这些属性：</p>
<pre><code class="lang-Python">&gt;&gt;&gt; data = MyDataclass(data1=&quot;data1&quot;, kwargs=&#123;&quot;test&quot;: 1, &quot;test2&quot;: 2&#125;)
&gt;&gt;&gt; data.test
1
&gt;&gt;&gt; data.test2
2

&gt;&gt;&gt; from dataclasses import asdict
&gt;&gt;&gt; asdict(data)
&#123;&#39;data1&#39;: &#39;data1&#39;, &#39;data2&#39;: None, &#39;data3&#39;: None, &#39;kwargs&#39;: &#123;&#39;test&#39;: 1, &#39;test2&#39;: 2&#125;&#125;
</code></pre>
<h3 id="提供一个特殊方法专用于处理-kwargs"><a href="#提供一个特殊方法专用于处理-kwargs" class="headerlink" title="提供一个特殊方法专用于处理**kwargs"></a>提供一个特殊方法专用于处理<code>**kwargs</code></h3><p>回答中提供了另一个办法：</p>
<pre><code class="lang-Python">from dataclasses import dataclass
from inspect import signature


@dataclass
class Container:
    user_id: int
    body: str

    @classmethod
    def from_kwargs(cls, **kwargs):
        # 获取构造函数签名
        cls_fields = &#123;field for field in signature(cls).parameters&#125;

        # 分辨出提及到的参数和多余出的新参数
        native_args, new_args = &#123;&#125;, &#123;&#125;
        for name, val in kwargs.items():
            if name in cls_fields:
                native_args[name] = val
            else:
                new_args[name] = val

        # 用提及到的参数创建新类 ...
        ret = cls(**native_args)

        # ... 然后逐步将新参数设为属性
        for new_name, new_val in new_args.items():
            setattr(ret, new_name, new_val)
        return ret
</code></pre>
<p>用起来像下面这样：</p>
<pre><code class="lang-Python">params = &#123;&#39;user_id&#39;: 1, &#39;body&#39;: &#39;foo&#39;, &#39;bar&#39;: &#39;baz&#39;, &#39;amount&#39;: 10&#125;
Container(**params)  # 不能这样使用，会引发TypeError 
c = Container.from_kwargs(**params)
print(c.bar)  # 输出：&#39;baz&#39;
</code></pre>
<h3 id="手动改写-new-方法"><a href="#手动改写-new-方法" class="headerlink" title="手动改写__new__()方法"></a>手动改写<code>__new__()</code>方法</h3><p>由于dataclass只是生成<code>__init__()</code>，我们可以改写<code>__new__()</code>的规则：</p>
<pre><code class="lang-Python">from dataclasses import dataclass


@dataclass
class Container:
    user_id: int
    body: str

    def __new__(cls, *args, **kwargs):
        try:
            initializer = cls.__initializer
        except AttributeError:
            # 将生成的原有的__init__()放在另一个地方
            cls.__initializer = initializer = cls.__init__
            # 用一种合适的方式改写它
            cls.__init__ = lambda *a, **k: None

        # 这位答者引用了上面一种方法的代码来阐述
        added_args = &#123;&#125;
        for name in list(kwargs.keys()):
            if name not in cls.__annotations__:
                added_args[name] = kwargs.pop(name)

        ret = object.__new__(cls)
        initializer(ret, **kwargs)
        # ... 然后逐步将新参数设为属性
        for new_name, new_val in added_args.items():
            setattr(ret, new_name, new_val)

        return ret


if __name__ == &quot;__main__&quot;:
    params = &#123;&#39;user_id&#39;: 1, &#39;body&#39;: &#39;foo&#39;, &#39;bar&#39;: &#39;baz&#39;, &#39;amount&#39;: 10&#125;
    c = Container(**params)
    print(c.bar)  # 输出: &#39;baz&#39;
    print(c.body)  # 输出: &#39;baz&#39;`
</code></pre>
<!--
* * *
参考资料均来自搜索引擎
[dataclasses --- 数据类 — Python 文档](https://docs.python.org/zh-cn/3/library/dataclasses.html)
[PEP 557 – Data Classes | peps.python.org](https://peps.python.org/pep-0557/)
[dataclass数据类 - 巴蜀秀才 - 博客园](https://www.cnblogs.com/dan-baishucaizi/p/14786600.html)
[Python: データ保持用のクラスを定義する (dataclasses) - け日記](https://ohke.hateblo.jp/entry/2020/02/29/230000)
[python — Python 3.7データクラスのクラス継承](https://www.web-dev-qa-db-ja.com/ja/python/python-37%E3%83%87%E3%83%BC%E3%82%BF%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E7%B6%99%E6%89%BF/805744243/)
[【詳解】 Pythonのdataclasses](https://zenn.dev/enven/articles/8b80ff38461b4ff329aa)
[python - python3 dataclass with **kwargs(asterisk) - Stack Overflow](https://stackoverflow.com/questions/55099243/python3-dataclass-with-kwargsasterisk/63291704)
[Python3.7中dataclass模块简单说明 - 知乎](https://zhuanlan.zhihu.com/p/419778289)
--> 
        </div>

    </div>

    

    

    
  <div class="article-refer hairline">
    <h3> 参考記事 </h3>
    
    <p>
      <a target="_blank" rel="nofollow" href="https://docs.python.org/zh-cn/3/library/dataclasses.html">dataclasses --- 数据类 — Python 文档</a>
    </p>
    
    <p>
      <a target="_blank" rel="nofollow" href="https://peps.python.org/pep-0557/">PEP 557 – Data Classes | peps.python.org</a>
    </p>
    
    <p>
      <a target="_blank" rel="nofollow" href="https://www.cnblogs.com/dan-baishucaizi/p/14786600.html">dataclass数据类 - 巴蜀秀才 - 博客园</a>
    </p>
    
    <p>
      <a target="_blank" rel="nofollow" href="https://ohke.hateblo.jp/entry/2020/02/29/230000">Python: データ保持用のクラスを定義する (dataclasses) - け日記</a>
    </p>
    
    <p>
      <a target="_blank" rel="nofollow" href="https://www.web-dev-qa-db-ja.com/ja/python/python-37%E3%83%87%E3%83%BC%E3%82%BF%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E7%B6%99%E6%89%BF/805744243/">python — Python 3.7データクラスのクラス継承</a>
    </p>
    
    <p>
      <a target="_blank" rel="nofollow" href="https://zenn.dev/enven/articles/8b80ff38461b4ff329aa">Python: 【詳解】 Pythonのdataclasses</a>
    </p>
    
    <p>
      <a target="_blank" rel="nofollow" href="https://stackoverflow.com/questions/55099243/python3-dataclass-with-kwargsasterisk/63291704">python - python3 dataclass with **kwargs(asterisk) - Stack Overflow</a>
    </p>
    
    <p>
      <a target="_blank" rel="nofollow" href="https://zhuanlan.zhihu.com/p/419778289">Python3.7中dataclass模块简单说明 - 知乎</a>
    </p>
    
  </div>
  

    

    

    
<nav class="article-nav">
  
    <a href="/tech/BayesWenyan/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-caption">次の記事</div>
      <div class="article-nav-title">
        
          用朴素贝叶斯辨别文言与白话
        
      </div>
    </a>
  
  
    <a href="/essay/mirage/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-caption">前の記事</div>
      <div class="article-nav-title">《空华》| 序言手记</div>
    </a>
  
</nav>


    <section class="share">
        <div class="share-title">シェア</div>
        <a class="share-item" target="_blank"
            href="https://twitter.com/share?text=Python dataclasses 数据类相关问题 - 《日想錄》&url=https%3A%2F%2Fblog.nranp.com%2Ftech%2FPythonDataclassesProblems%2F">
            <ion-icon name="logo-twitter"></ion-icon>
        </a>
        <a class="share-item" target="_blank"
            href="https://www.facebook.com/sharer.php?title=Python dataclasses 数据类相关问题 - 《日想錄》&u=https%3A%2F%2Fblog.nranp.com%2Ftech%2FPythonDataclassesProblems%2F">
            <ion-icon name="logo-facebook"></ion-icon>
        </a>
        <!-- <a class="share-item" target="_blank"
            href="https://service.weibo.com/share/share.php?title=Python dataclasses 数据类相关问题 - 《日想錄》&url=https://blog.nranp.com/tech/PythonDataclassesProblems/&pic=">
            <div class="n-icon n-icon-weibo"></div>
        </a> -->
    </section>

</article>








<section class="comments">
    <div id="gitalk-container"></div>
</section>









</div>
                </section>
            </section>

            
            <aside class="sidebar sidebar-search-fix">
                

    <div class="search">
    <div class="has-icon-right">
        <input type="text" class="form-input" id="search" placeholder="SEARCH" autocomplete="off">
        <div class="form-icon">
            <ion-icon name="search"></ion-icon>
        </div>
    </div>
    <div class="search-result" id="search-ps"></div>
</div>


<div class="widget" id="widget">
    
      
  <div class="widget-wrap">
    <div class="widget-inner">
      <div class="toc post-toc-html"></div>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-cate">
    <div class="widget-title"><span>Categories</span></div>
    <div class="widget-inner">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">essay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/junk/">junk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech/">tech</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/works/">works</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-tags">
    <div class="widget-title"><span>Tags</span></div>
    <div class="widget-inner">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bayes/" rel="tag">Bayes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DecisionTreeCode/" rel="tag">DecisionTreeCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MachineLearning/" rel="tag">MachineLearning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dataclasses/" rel="tag">dataclasses</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/giffgaff/" rel="tag">giffgaff</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BD%E5%A4%96%E7%94%B5%E8%AF%9D%E5%8D%A1/" rel="tag">国外电话卡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%8B%E8%AE%B0/" rel="tag">手记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E7%AB%A0/" rel="tag">文章</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A9%BA%E5%8D%8E/" rel="tag">空华</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-recent-posts">
    <div class="widget-title"><span>Recent Posts</span></div>
    <div class="widget-inner">
      <ul>
        
          <li>
            <a href="/works/giffgaff/">Giffgaff：注册一张便宜的英国长期实体电话卡~</a>
          </li>
        
          <li>
            <a href="/tech/DecisionTreeCode/">决策树算法简单实现</a>
          </li>
        
          <li>
            <a href="/tech/BayesWenyan/">用朴素贝叶斯辨别文言与白话</a>
          </li>
        
          <li>
            <a href="/tech/PythonDataclassesProblems/">Python dataclasses 数据类相关问题</a>
          </li>
        
          <li>
            <a href="/essay/mirage/">《空华》| 序言手记</a>
          </li>
        
      </ul>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-archive">
    <div class="widget-title"><span>Archive</span></div>
    <div class="widget-inner">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021</a></li></ul>
    </div>
  </div>


    
</div>

<div id="backtop"><i class="icon icon-arrow-up"></i></div>
            </aside>
            
        </div>
    </div>

    <footer class="footer">
    <div class="footer-wave">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#3c4859" fill-opacity="1" d="M0,160L60,181.3C120,203,240,245,360,240C480,235,600,181,720,186.7C840,192,960,256,1080,261.3C1200,267,1320,213,1380,186.7L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
    </div>

    <!-- Please do not remove this -->
    <!-- 开源不易，请勿删除 -->
    <div class="footer-wrap">
        <div class="footer-inner"> 
            <b>《日想錄》 &copy; 2017-2023&nbsp;|&nbsp;<a href="https://icp.gov.moe/?keyword=20232320" target="_blank" rel="noopener noreferrer">萌ICP备20232320号</a></b><br>
            <b>Powered By <a href="https://hexo.io/" target="_blank">Hexo</a> · Theme By <a href="https://linhong.me/" target="_blank">Aomori</a></b><br>
            <b>ひとりの惑星。</b>
        </div>
    </div>

</footer>

<script type="module" src="https://unpkg.com/ionicons@6.0.2/dist/ionicons/ionicons.esm.js"></script>


<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>





<script src="/dist/build.js?1654266144177.js"></script>


<script src="/dist/custom.js?1654266144177.js"></script>



<!-- 百度链接提交 -->
<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>











<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_SVG"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":true,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"superSample":2,"width":200,"height":400,"position":"right","hOffset":40,"vOffset":-20},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>

</html>